.PHONY: generate dev build test clean

# Generate TypeScript SDK from Go backend
generate:
	@echo "ğŸ”§ Generating TypeScript SDK..."
	go run cmd/generate/main.go

# Run the backend in development mode
dev:
	@echo "ğŸš€ Starting Go backend..."
	go run main.go

# Build the backend binary
build:
	@echo "ğŸ”¨ Building Go binary..."
	go build -o budget-zero-backend main.go

# Run tests
test:
	@echo "ğŸ§ª Running tests..."
	go test ./...

# Format Go code
fmt:
	@echo "âœ¨ Formatting Go code..."
	go fmt ./...

# Vet Go code
vet:
	@echo "ğŸ” Vetting Go code..."
	go vet ./...

# Tidy Go modules
mod:
	@echo "ğŸ§¹ Tidying Go modules..."
	go mod tidy

# Clean build artifacts
clean:
	@echo "ğŸ§¹ Cleaning build artifacts..."
	rm -f budget-zero-backend

# Install dependencies
deps:
	@echo "ğŸ“¦ Installing Go dependencies..."
	go mod download

# Full setup: install deps, generate SDK, and start dev server
setup: deps generate dev
